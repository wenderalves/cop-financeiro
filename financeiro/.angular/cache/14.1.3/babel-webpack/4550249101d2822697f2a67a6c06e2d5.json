{"ast":null,"code":"let UUID = require('ordered-uuid');\n\nimport success from '../../api-utils/success';\nimport error from '../../api-utils/error';\nimport showUserErrors from '../../api-utils/showUserErrors';\nexport default function add(data, keyProvided) {\n  // check for user errors\n  if (!data) {\n    this.userErrors.push('No data specified in add() method. You must use an object, e.g { id: 1, name: \"Bill\", age: 47 }');\n  } else if (!(typeof data == 'object' && data instanceof Array == false)) {\n    this.userErrors.push('Data passed to .add() must be an object. Not an array, string, number or boolean.');\n  } // no user errors, do the add\n\n\n  if (!this.userErrors.length) {\n    let collectionName = this.collectionName;\n    return new Promise((resolve, reject) => {\n      let key = null; // if no key provided, generate random, ordered key\n\n      if (!keyProvided) {\n        key = UUID.generate();\n      } else {\n        key = keyProvided;\n      }\n\n      return this.lf[collectionName].setItem(key, data).then(() => {\n        resolve(success.call(this, `Document added to \"${collectionName}\" collection.`, {\n          key,\n          data\n        }));\n      }).catch(err => {\n        reject(error.call(this, `Could not add Document to ${collectionName} collection.`));\n      });\n    });\n  } else {\n    showUserErrors.call(this);\n  }\n}","map":{"version":3,"names":["UUID","require","success","error","showUserErrors","add","data","keyProvided","userErrors","push","Array","length","collectionName","Promise","resolve","reject","key","generate","lf","setItem","then","call","catch","err"],"sources":["D:/wender/projetos/cop-financeiro/financeiro/node_modules/localbase/localbase/api/actions/add.js"],"sourcesContent":["let UUID = require('ordered-uuid')\nimport success from '../../api-utils/success'\nimport error from '../../api-utils/error'\nimport showUserErrors from '../../api-utils/showUserErrors'\n\nexport default function add(data, keyProvided) {\n  // check for user errors\n  if (!data) {\n    this.userErrors.push('No data specified in add() method. You must use an object, e.g { id: 1, name: \"Bill\", age: 47 }')\n  }\n  else if (!(typeof data == 'object' && data instanceof Array == false)) {\n    this.userErrors.push('Data passed to .add() must be an object. Not an array, string, number or boolean.')\n  }\n\n  // no user errors, do the add\n  if (!this.userErrors.length) {\n    let collectionName = this.collectionName\n  \n    return new Promise((resolve, reject) => {\n      let key = null\n\n      // if no key provided, generate random, ordered key\n      if (!keyProvided) {\n        key = UUID.generate()\n      }\n      else {\n        key = keyProvided\n      }\n\n      return this.lf[collectionName].setItem(key, data).then(() => {\n        resolve(\n          success.call(\n            this,\n            `Document added to \"${ collectionName }\" collection.`,\n            { key, data }\n          )\n        )\n      }).catch(err => {\n        reject(\n          error.call(\n            this,\n            `Could not add Document to ${ collectionName } collection.`\n          )\n        )\n      })\n    })\n  }\n  else {\n    showUserErrors.call(this)\n  }\n}"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,cAAD,CAAlB;;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,cAAP,MAA2B,gCAA3B;AAEA,eAAe,SAASC,GAAT,CAAaC,IAAb,EAAmBC,WAAnB,EAAgC;EAC7C;EACA,IAAI,CAACD,IAAL,EAAW;IACT,KAAKE,UAAL,CAAgBC,IAAhB,CAAqB,iGAArB;EACD,CAFD,MAGK,IAAI,EAAE,OAAOH,IAAP,IAAe,QAAf,IAA2BA,IAAI,YAAYI,KAAhB,IAAyB,KAAtD,CAAJ,EAAkE;IACrE,KAAKF,UAAL,CAAgBC,IAAhB,CAAqB,mFAArB;EACD,CAP4C,CAS7C;;;EACA,IAAI,CAAC,KAAKD,UAAL,CAAgBG,MAArB,EAA6B;IAC3B,IAAIC,cAAc,GAAG,KAAKA,cAA1B;IAEA,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MACtC,IAAIC,GAAG,GAAG,IAAV,CADsC,CAGtC;;MACA,IAAI,CAACT,WAAL,EAAkB;QAChBS,GAAG,GAAGhB,IAAI,CAACiB,QAAL,EAAN;MACD,CAFD,MAGK;QACHD,GAAG,GAAGT,WAAN;MACD;;MAED,OAAO,KAAKW,EAAL,CAAQN,cAAR,EAAwBO,OAAxB,CAAgCH,GAAhC,EAAqCV,IAArC,EAA2Cc,IAA3C,CAAgD,MAAM;QAC3DN,OAAO,CACLZ,OAAO,CAACmB,IAAR,CACE,IADF,EAEG,sBAAsBT,cAAgB,eAFzC,EAGE;UAAEI,GAAF;UAAOV;QAAP,CAHF,CADK,CAAP;MAOD,CARM,EAQJgB,KARI,CAQEC,GAAG,IAAI;QACdR,MAAM,CACJZ,KAAK,CAACkB,IAAN,CACE,IADF,EAEG,6BAA6BT,cAAgB,cAFhD,CADI,CAAN;MAMD,CAfM,CAAP;IAgBD,CA3BM,CAAP;EA4BD,CA/BD,MAgCK;IACHR,cAAc,CAACiB,IAAf,CAAoB,IAApB;EACD;AACF"},"metadata":{},"sourceType":"module"}