{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { DebugUtils } from '../../share/utils/debug';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./lancamento.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../components/header/header.component\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LancamentosComponent_div_60_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"div\", 37);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 38);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\")(8, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function LancamentosComponent_div_60_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const lanc_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeLancamento(lanc_r1.id));\n    });\n    i0.ɵɵtext(9, \" Excluir \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const lanc_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(3, 3, lanc_r1.dataMovimento, \"dd/MM/yyyy\"), \" \\u2022 \", lanc_r1.descricao, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 6, lanc_r1.valor, \"BRL\"));\n  }\n}\n\nexport let LancamentosComponent = /*#__PURE__*/(() => {\n  class LancamentosComponent {\n    constructor(service) {\n      this.service = service;\n      this.lancamentos = [];\n      this.balanco = 0;\n      this.entradas = 0;\n      this.saidas = 0;\n      this.lancamentoForm = new FormGroup({\n        dataMovimento: new FormControl('', Validators.required),\n        valor: new FormControl('', Validators.required),\n        descricao: new FormControl('', Validators.required)\n      });\n    }\n\n    ngOnInit() {\n      this.atualizaLancamentos();\n    }\n\n    addLancamento() {\n      var _a, _b;\n\n      let ultimo = (_a = this.lancamentos[this.lancamentos.length - 1]) === null || _a === void 0 ? void 0 : _a.id;\n      let lancamento = {\n        id: ultimo ? ultimo + 1 : 1,\n        dataMovimento: this.lancamentoForm.value.dataMovimento ? new Date(this.lancamentoForm.value.dataMovimento) : new Date(),\n        valor: Number(this.lancamentoForm.value.valor),\n        descricao: (_b = this.lancamentoForm.value.descricao) !== null && _b !== void 0 ? _b : ''\n      };\n      DebugUtils.logConsole(`Adicionou >>> ${JSON.stringify(lancamento)}`);\n      this.service.add(lancamento).then(() => this.atualizaLancamentos());\n    }\n\n    atualizaLancamentos() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.lancamentos = [];\n        yield this.service.getAll().then(itens => __awaiter(this, void 0, void 0, function* () {\n          return yield this.lancamentos = itens;\n        }));\n        this.atualizarSaldos();\n      });\n    }\n\n    removeLancamento(id) {\n      DebugUtils.logConsole(`Excluiu >>> ${JSON.stringify(this.lancamentos[id])}`); // this.lancamentos = this.lancamentos.filter(el => el.id !== id);\n\n      this.atualizaLancamentos();\n    }\n\n    atualizarSaldos() {\n      this.entradas = this.lancamentos.reduce((pv, cur) => cur.valor > 0 ? pv + cur.valor : pv, 0);\n      this.saidas = Math.abs(this.lancamentos.reduce((pv, cur) => cur.valor < 0 ? pv + cur.valor : pv, 0));\n      this.balanco = this.entradas - this.saidas;\n    }\n\n  }\n\n  LancamentosComponent.ɵfac = function LancamentosComponent_Factory(t) {\n    return new (t || LancamentosComponent)(i0.ɵɵdirectiveInject(i1.LancamentosService));\n  };\n\n  LancamentosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LancamentosComponent,\n    selectors: [[\"app-lancamentos\"]],\n    decls: 61,\n    vars: 15,\n    consts: [[\"titulo\", \"Lan\\u00E7amentos\"], [1, \"flex\", \"flex-row\", \"items-center\", \"justify-start\", \"gap-6\", \"my-2\"], [1, \"p-4\", \"flex\", \"items-center\", \"justify-center\", \"rounded-full\", \"bg-secundary\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"28\", \"height\", \"28\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1\", \"stroke\", \"currentColor\", \"fill\", \"none\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"icon-tabler\", \"icon-tabler-wallet\"], [\"stroke\", \"none\", \"d\", \"M0 0h24v24H0z\", \"fill\", \"none\"], [\"d\", \"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12\"], [\"d\", \"M20 12v4h-4a2 2 0 0 1 0 -4h4\"], [1, \"indicador\"], [1, \"label\"], [1, \"valor\"], [1, \"flex-auto\", \"overflow-auto\", \"p-4\"], [1, \"flex\", \"flex-col\", \"items-start\", \"justify-start\", \"shadow\", \"drop-shadow-md\", \"p-3\", \"rounded-md\", \"bg-white\"], [1, \"font-bold\", \"text-green-400\", \"mb-2\"], [1, \"flex\", \"flex-row\", \"gap-4\", \"items-end\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"data\", 1, \"flex\", \"flex-col\", \"justify-start\", \"text-[10px]\", \"text-gray-500\", \"uppercase\"], [\"type\", \"date\", \"name\", \"data\", \"id\", \"data\", \"formControlName\", \"dataMovimento\", 1, \"form-input\", \"rounded\", \"border-gray-300\"], [\"for\", \"montante\", 1, \"flex\", \"flex-col\", \"justify-start\", \"text-[10px]\", \"text-gray-500\", \"uppercase\"], [\"type\", \"number\", \"name\", \"montante\", \"id\", \"montante\", \"formControlName\", \"valor\", 1, \"form-input\", \"rounded\", \"border-gray-300\"], [\"for\", \"descricao\", 1, \"flex\", \"flex-col\", \"justify-start\", \"text-[10px]\", \"text-gray-500\", \"uppercase\"], [\"type\", \"text\", \"name\", \"descricao\", \"id\", \"descricao\", \"formControlName\", \"descricao\", 1, \"form-input\", \"rounded\", \"border-gray-300\", \"w-[650px]\"], [\"type\", \"submit\", 1, \"btn\", \"bg-primary\", \"text-white\", 3, \"disabled\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1\", \"stroke\", \"currentColor\", \"fill\", \"none\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"icon\", \"icon-tabler\", \"icon-tabler-device-floppy\"], [\"d\", \"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2\"], [\"cx\", \"12\", \"cy\", \"14\", \"r\", \"2\"], [\"points\", \"14 4 14 8 8 8 8 4\"], [1, \"flex\", \"flex-col\", \"items-start\", \"justify-start\", \"shadow\", \"drop-shadow-md\", \"p-3\", \"rounded-md\", \"bg-white\", \"mt-4\"], [1, \"flex\", \"flex-col\", \"items-start\", \"justify-start\", \"w-full\"], [1, \"flex\", \"flex-col\", \"w-full\"], [1, \"lancamento-grupo\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"2\", \"stroke\", \"currentColor\", \"fill\", \"none\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"icon\", \"icon-tabler\", \"icon-tabler-calendar-event\"], [\"x\", \"4\", \"y\", \"5\", \"width\", \"16\", \"height\", \"16\", \"rx\", \"2\"], [\"x1\", \"16\", \"y1\", \"3\", \"x2\", \"16\", \"y2\", \"7\"], [\"x1\", \"8\", \"y1\", \"3\", \"x2\", \"8\", \"y2\", \"7\"], [\"x1\", \"4\", \"y1\", \"11\", \"x2\", \"20\", \"y2\", \"11\"], [\"x\", \"8\", \"y\", \"15\", \"width\", \"2\", \"height\", \"2\"], [\"class\", \"lancamento-dados\", 4, \"ngFor\", \"ngForOf\"], [1, \"lancamento-dados\"], [1, \"grow\"], [1, \"w-32\"], [1, \"btn-small\", \"bg-danger\", \"text-white\", 3, \"click\"]],\n    template: function LancamentosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-header\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(3, \"svg\", 3);\n        i0.ɵɵelement(4, \"path\", 4)(5, \"path\", 5)(6, \"path\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"span\", 8);\n        i0.ɵɵtext(9, \"Balan\\u00E7o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"span\", 9);\n        i0.ɵɵtext(11);\n        i0.ɵɵpipe(12, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 7)(14, \"span\", 8);\n        i0.ɵɵtext(15, \"Entradas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"span\", 9);\n        i0.ɵɵtext(17);\n        i0.ɵɵpipe(18, \"currency\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 7)(20, \"span\", 8);\n        i0.ɵɵtext(21, \"Sa\\u00EDdas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"span\", 9);\n        i0.ɵɵtext(23);\n        i0.ɵɵpipe(24, \"currency\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(25, \"main\", 10)(26, \"div\", 11)(27, \"h2\", 12);\n        i0.ɵɵtext(28, \"Nova Movimenta\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"form\", 13);\n        i0.ɵɵlistener(\"ngSubmit\", function LancamentosComponent_Template_form_ngSubmit_29_listener() {\n          return ctx.addLancamento();\n        });\n        i0.ɵɵelementStart(30, \"label\", 14);\n        i0.ɵɵtext(31, \" Data Movimento \");\n        i0.ɵɵelement(32, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"label\", 16);\n        i0.ɵɵtext(34, \" Valor \");\n        i0.ɵɵelement(35, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"label\", 18);\n        i0.ɵɵtext(37, \" Descri\\u00E7\\u00E3o \");\n        i0.ɵɵelement(38, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"button\", 20);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(40, \"svg\", 21);\n        i0.ɵɵelement(41, \"path\", 4)(42, \"path\", 22)(43, \"circle\", 23)(44, \"polyline\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(45, \" Cadastrar \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(46, \"div\", 25)(47, \"h2\", 12);\n        i0.ɵɵtext(48, \"Registros de Lan\\u00E7amentos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"div\", 26)(50, \"div\", 27)(51, \"div\", 28);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(52, \"svg\", 29);\n        i0.ɵɵelement(53, \"path\", 4)(54, \"rect\", 30)(55, \"line\", 31)(56, \"line\", 32)(57, \"line\", 33)(58, \"rect\", 34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(59, \" ONTEM \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(60, LancamentosComponent_div_60_Template, 10, 9, \"div\", 35);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 6, ctx.balanco, \"BRL\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 9, ctx.entradas, \"BRL\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(24, 12, ctx.saidas, \"BRL\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.lancamentoForm);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"disabled\", ctx.lancamentoForm.invalid);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"ngForOf\", ctx.lancamentos);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.HeaderComponent, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i2.CurrencyPipe, i2.DatePipe]\n  });\n  return LancamentosComponent;\n})();","map":{"version":3,"mappings":";AACA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,UAAjC,QAAmD,gBAAnD;AACA,SAASC,UAAT,QAA2B,yBAA3B;;;;;;;;;;;;ICgFQC;IAAAA,gCAA+D,CAA/D,EAA+D,KAA/D,EAA+D,EAA/D;IAEIA;;IACFA;IACAA;IAAkBA;;IAAmCA;IACrDA,4BAAK,CAAL,EAAK,QAAL,EAAK,EAAL;IACiDA;MAAA;MAAA;MAAA;MAAA,OAASA,mDAAT;IAAkC,CAAlC;IAC7CA;IACFA;;;;;IANAA;IAAAA;IAEgBA;IAAAA;;;;ADrE5B,WAAaC,oBAAb;EAAM,MAAOA,oBAAP,CAA2B;IAa/BC,YAAoBC,OAApB,EAA+C;MAA3B;MAXpB,mBAAkC,EAAlC;MACA,eAAkB,CAAlB;MACA,gBAAmB,CAAnB;MACA,cAAiB,CAAjB;MAEA,sBAAiB,IAAIN,SAAJ,CAAc;QAC7BO,aAAa,EAAE,IAAIR,WAAJ,CAAgB,EAAhB,EAAoBE,UAAU,CAACO,QAA/B,CADc;QAE7BC,KAAK,EAAE,IAAIV,WAAJ,CAAgB,EAAhB,EAAoBE,UAAU,CAACO,QAA/B,CAFsB;QAG7BE,SAAS,EAAE,IAAIX,WAAJ,CAAgB,EAAhB,EAAoBE,UAAU,CAACO,QAA/B;MAHkB,CAAd,CAAjB;IAOC;;IAEDG,QAAQ;MACN,KAAKC,mBAAL;IACD;;IAEDC,aAAa;;;MACX,IAAIC,MAAM,GAAW,WAAKC,WAAL,CAAiB,KAAKA,WAAL,CAAiBC,MAAjB,GAA0B,CAA3C,OAA6C,IAA7C,IAA6CC,aAA7C,GAA6C,MAA7C,GAA6CA,GAAEC,EAApE;MAEA,IAAIC,UAAU,GAAqB;QACjCD,EAAE,EAAGJ,MAAD,GAAWA,MAAM,GAAG,CAApB,GAAwB,CADK;QAEjCP,aAAa,EAAG,KAAKa,cAAL,CAAoBC,KAApB,CAA0Bd,aAA3B,GAA4C,IAAIe,IAAJ,CAAS,KAAKF,cAAL,CAAoBC,KAApB,CAA0Bd,aAAnC,CAA5C,GAAgG,IAAIe,IAAJ,EAF9E;QAGjCb,KAAK,EAAEc,MAAM,CAAC,KAAKH,cAAL,CAAoBC,KAApB,CAA0BZ,KAA3B,CAHoB;QAIjCC,SAAS,EAAE,WAAKU,cAAL,CAAoBC,KAApB,CAA0BX,SAA1B,MAAmC,IAAnC,IAAmCc,aAAnC,GAAmCA,EAAnC,GAAuC;MAJjB,CAAnC;MAMAtB,UAAU,CAACuB,UAAX,CAAsB,iBAAiBC,IAAI,CAACC,SAAL,CAAeR,UAAf,CAA0B,EAAjE;MACA,KAAKb,OAAL,CAAasB,GAAb,CAAiBT,UAAjB,EAA6BU,IAA7B,CAAkC,MAAM,KAAKjB,mBAAL,EAAxC;IACD;;IAEKA,mBAAmB;;QACvB,KAAKG,WAAL,GAAmB,EAAnB;QACA,MAAM,KAAKT,OAAL,CAAawB,MAAb,GAAsBD,IAAtB,CAAiCE,KAAN,IAAcC;UAAC,aAAO,KAAKjB,WAAL,GAAmBgB,KAA1B;QAAgC,CAAjC,CAAzC,CAAN;QACA,KAAKE,eAAL;MACD;IAAA;;IAEDC,gBAAgB,CAAChB,EAAD,EAAW;MACzBhB,UAAU,CAACuB,UAAX,CAAsB,eAAeC,IAAI,CAACC,SAAL,CAAe,KAAKZ,WAAL,CAAiBG,EAAjB,CAAf,CAAoC,EAAzE,EADyB,CAEzB;;MACA,KAAKN,mBAAL;IACD;;IAEDqB,eAAe;MACb,KAAKE,QAAL,GAAgB,KAAKpB,WAAL,CAAiBqB,MAAjB,CAAwB,CAACC,EAAD,EAAKC,GAAL,KAAcA,GAAG,CAAC7B,KAAJ,GAAY,CAAb,GAAkB4B,EAAE,GAAGC,GAAG,CAAC7B,KAA3B,GAAmC4B,EAAxE,EAA4E,CAA5E,CAAhB;MACA,KAAKE,MAAL,GAAcC,IAAI,CAACC,GAAL,CAAS,KAAK1B,WAAL,CAAiBqB,MAAjB,CAAwB,CAACC,EAAD,EAAKC,GAAL,KAAcA,GAAG,CAAC7B,KAAJ,GAAY,CAAb,GAAkB4B,EAAE,GAAGC,GAAG,CAAC7B,KAA3B,GAAmC4B,EAAxE,EAA4E,CAA5E,CAAT,CAAd;MACA,KAAKK,OAAL,GAAe,KAAKP,QAAL,GAAgB,KAAKI,MAApC;IACD;;EAjD8B;;;qBAApBnC,sBAAoBD;EAAA;;;UAApBC;IAAoBuC;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCjBjC5C,sCAAiC,CAAjC,EAAiC,KAAjC,EAAiC,CAAjC,EAAiC,CAAjC,EAAiC,KAAjC,EAAiC,CAAjC;QAGMA;QAAAA;QAGEA,2BAAyD,CAAzD,EAAyD,MAAzD,EAAyD,CAAzD,EAAyD,CAAzD,EAAyD,MAAzD,EAAyD,CAAzD;QAKFA;QAEFA;QAAAA,+BAAuB,CAAvB,EAAuB,MAAvB,EAAuB,CAAvB;QACsBA;QAAOA;QAC3BA;QAAoBA;;QAA+BA;QAErDA,gCAAuB,EAAvB,EAAuB,MAAvB,EAAuB,CAAvB;QACsBA;QAAQA;QAC5BA;QAAoBA;;QAAgCA;QAEtDA,gCAAuB,EAAvB,EAAuB,MAAvB,EAAuB,CAAvB;QACsBA;QAAMA;QAC1BA;QAAoBA;;QAA8BA;QAKxDA,kCAA0C,EAA1C,EAA0C,KAA1C,EAA0C,EAA1C,EAA0C,EAA1C,EAA0C,IAA1C,EAA0C,EAA1C;QAE8CA;QAAiBA;QAC3DA;QAAyEA;UAAA,OAAY6C,mBAAZ;QAA2B,CAA3B;QACvE7C;QACEA;QACAA;QAEFA;QAEAA;QACEA;QACAA;QAEFA;QAEAA;QACEA;QACAA;QAEFA;QAEAA;QACEA;QAAAA;QAGEA,4BAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,QAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,UAAzD,EAAyD,EAAzD;QAIFA;QACAA;QACFA;QAGJA;QAAAA,iCAAwG,EAAxG,EAAwG,IAAxG,EAAwG,EAAxG;QAC4CA;QAAwBA;QAElEA,iCAA4D,EAA5D,EAA4D,KAA5D,EAA4D,EAA5D,EAA4D,EAA5D,EAA4D,KAA5D,EAA4D,EAA5D;QAGMA;QAAAA;QAGEA,4BAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD,EAAyD,EAAzD,EAAyD,MAAzD,EAAyD,EAAzD;QAMFA;QAEAA;QACFA;QACAA;QAYFA;;;;QA/EoBA;QAAAA;QAIAA;QAAAA;QAIAA;QAAAA;QAQsBA;QAAAA;QAmBcA;QAAAA;QAgCPA;QAAAA;;;;;EDjEvD,OAAaC,oBAAb;AAAA","names":["FormControl","FormGroup","Validators","DebugUtils","i0","LancamentosComponent","constructor","service","dataMovimento","required","valor","descricao","ngOnInit","atualizaLancamentos","addLancamento","ultimo","lancamentos","length","_a","id","lancamento","lancamentoForm","value","Date","Number","_b","logConsole","JSON","stringify","add","then","getAll","itens","__awaiter","atualizarSaldos","removeLancamento","entradas","reduce","pv","cur","saidas","Math","abs","balanco","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\wender\\projetos\\cop-financeiro\\financeiro\\src\\app\\pages\\lancamentos\\lancamentos.component.ts","D:\\wender\\projetos\\cop-financeiro\\financeiro\\src\\app\\pages\\lancamentos\\lancamentos.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { DebugUtils } from '../../share/utils/debug'\nimport { LancamentosService } from './lancamento.service';\n\ninterface DadosLancamentos {\n  id: number,\n  descricao: string,\n  valor: number,\n  dataMovimento: Date\n}\n\n@Component({\n  selector: 'app-lancamentos',\n  templateUrl: './lancamentos.component.html',\n  styleUrls: ['./lancamentos.component.scss']\n})\nexport class LancamentosComponent implements OnInit {\n\n  lancamentos: DadosLancamentos[] = [];\n  balanco: number = 0;\n  entradas: number = 0;\n  saidas: number = 0;\n\n  lancamentoForm = new FormGroup({\n    dataMovimento: new FormControl('', Validators.required),\n    valor: new FormControl('', Validators.required),\n    descricao: new FormControl('', Validators.required)\n  });\n\n  constructor(private service: LancamentosService) {\n  }\n\n  ngOnInit(): void {\n    this.atualizaLancamentos();\n  }\n\n  addLancamento() {\n    let ultimo: number = this.lancamentos[this.lancamentos.length - 1]?.id;\n\n    let lancamento: DadosLancamentos = {\n      id: (ultimo) ? ultimo + 1 : 1,\n      dataMovimento: (this.lancamentoForm.value.dataMovimento) ? new Date(this.lancamentoForm.value.dataMovimento) : new Date(),\n      valor: Number(this.lancamentoForm.value.valor),\n      descricao: this.lancamentoForm.value.descricao ?? ''\n    }\n    DebugUtils.logConsole(`Adicionou >>> ${JSON.stringify(lancamento)}`);\n    this.service.add(lancamento).then(() => this.atualizaLancamentos());\n  }\n\n  async atualizaLancamentos() {\n    this.lancamentos = [];\n    await this.service.getAll().then(async itens => await (this.lancamentos = itens));\n    this.atualizarSaldos();\n  }\n\n  removeLancamento(id: number) {\n    DebugUtils.logConsole(`Excluiu >>> ${JSON.stringify(this.lancamentos[id])}`);\n    // this.lancamentos = this.lancamentos.filter(el => el.id !== id);\n    this.atualizaLancamentos();\n  }\n\n  atualizarSaldos() {\n    this.entradas = this.lancamentos.reduce((pv, cur) => (cur.valor > 0) ? pv + cur.valor : pv, 0);\n    this.saidas = Math.abs(this.lancamentos.reduce((pv, cur) => (cur.valor < 0) ? pv + cur.valor : pv, 0));\n    this.balanco = this.entradas - this.saidas;\n  }\n\n}\n","<app-header titulo=\"Lançamentos\">\n  <div class=\"flex flex-row items-center justify-start gap-6 my-2\">\n    <div class=\"p-4 flex items-center justify-center rounded-full bg-secundary\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon-tabler icon-tabler-wallet\" width=\"28\" height=\"28\"\n        viewBox=\"0 0 24 24\" stroke-width=\"1\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\"\n        stroke-linejoin=\"round\">\n        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n        <path\n          d=\"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12\">\n        </path>\n        <path d=\"M20 12v4h-4a2 2 0 0 1 0 -4h4\"></path>\n      </svg>\n    </div>\n    <div class=\"indicador\">\n      <span class=\"label\">Balanço</span>\n      <span class=\"valor\">{{ balanco | currency : 'BRL'}}</span>\n    </div>\n    <div class=\"indicador\">\n      <span class=\"label\">Entradas</span>\n      <span class=\"valor\">{{ entradas | currency : 'BRL'}}</span>\n    </div>\n    <div class=\"indicador\">\n      <span class=\"label\">Saídas</span>\n      <span class=\"valor\">{{ saidas | currency : 'BRL'}}</span>\n    </div>\n  </div>\n</app-header>\n\n<main class=\"flex-auto overflow-auto p-4\">\n  <div class=\"flex flex-col items-start justify-start shadow drop-shadow-md p-3 rounded-md bg-white\">\n    <h2 class=\"font-bold text-green-400 mb-2\">Nova Movimentação</h2>\n    <form class=\"flex flex-row gap-4 items-end\" [formGroup]=\"lancamentoForm\" (ngSubmit)=\"addLancamento()\">\n      <label for=\"data\" class=\"flex flex-col justify-start text-[10px] text-gray-500 uppercase\">\n        Data Movimento\n        <input type=\"date\" name=\"data\" id=\"data\" class=\"form-input rounded border-gray-300\"\n        formControlName=\"dataMovimento\">\n      </label>\n\n      <label for=\"montante\" class=\"flex flex-col justify-start text-[10px] text-gray-500 uppercase\">\n        Valor\n        <input type=\"number\" class=\"form-input rounded border-gray-300\" name=\"montante\" id=\"montante\"\n        formControlName=\"valor\">\n      </label>\n\n      <label for=\"descricao\" class=\"flex flex-col justify-start text-[10px] text-gray-500 uppercase\">\n        Descrição\n        <input type=\"text\" class=\"form-input rounded border-gray-300 w-[650px]\" name=\"descricao\" id=\"descricao\"\n        formControlName=\"descricao\">\n      </label>\n\n      <button class=\"btn bg-primary text-white\" type=\"submit\" [disabled]=\"lancamentoForm.invalid\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-device-floppy\" width=\"24\"\n          height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"1\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\"\n          stroke-linejoin=\"round\">\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n          <path d=\"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2\"></path>\n          <circle cx=\"12\" cy=\"14\" r=\"2\"></circle>\n          <polyline points=\"14 4 14 8 8 8 8 4\"></polyline>\n        </svg>\n        Cadastrar\n      </button>\n    </form>\n  </div>\n  <div class=\"flex flex-col items-start justify-start shadow drop-shadow-md p-3 rounded-md bg-white mt-4\">\n    <h2 class=\"font-bold text-green-400 mb-2\">Registros de Lançamentos</h2>\n\n    <div class=\"flex flex-col items-start justify-start w-full\">\n      <div class=\"flex flex-col w-full\">\n        <div class=\"lancamento-grupo\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-calendar-event\" width=\"24\"\n            height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\"\n            stroke-linejoin=\"round\">\n            <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n            <rect x=\"4\" y=\"5\" width=\"16\" height=\"16\" rx=\"2\"></rect>\n            <line x1=\"16\" y1=\"3\" x2=\"16\" y2=\"7\"></line>\n            <line x1=\"8\" y1=\"3\" x2=\"8\" y2=\"7\"></line>\n            <line x1=\"4\" y1=\"11\" x2=\"20\" y2=\"11\"></line>\n            <rect x=\"8\" y=\"15\" width=\"2\" height=\"2\"></rect>\n          </svg>\n\n          ONTEM\n        </div>\n        <div class=\"lancamento-dados\" *ngFor=\"let lanc of lancamentos\">\n          <div class=\"grow\">\n            {{ lanc.dataMovimento | date: 'dd/MM/yyyy'}} • {{ lanc.descricao }}\n          </div>\n          <div class=\"w-32\">{{ lanc.valor | currency : 'BRL' }}</div>\n          <div>\n            <button class=\"btn-small bg-danger text-white\" (click)=\"removeLancamento(lanc.id)\">\n              Excluir\n            </button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</main>\n"]},"metadata":{},"sourceType":"module"}